<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ネザー⇄現世 座標変換（小数点切替）</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      max-width: 500px;
    }
    th, td {
      border: 1px solid #aaa;
      padding: 10px;
      text-align: center;
    }
    input[type="number"] {
      width: 100%;
      padding: 5px;
      box-sizing: border-box;
    }
    caption {
      font-size: 1.5em;
      margin-bottom: 10px;
      font-weight: bold;
    }
    .toggle-container {
      margin: 15px 0;
    }
  </style>
</head>
<body>

  <table>
    <thead>
      <tr>
        <th>＼</th>
        <th>ネザー</th>
        <th>現世</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>X</td>
        <td><input type="number" id="netherX" placeholder="例: 150"></td>
        <td><input type="number" id="overX" placeholder="例: 1200"></td>
      </tr>
      <tr>
        <td>Y</td>
        <td><input type="number" id="netherY" placeholder="例: 64"></td>
        <td><input type="number" id="overY" placeholder="例: 64"></td>
      </tr>
      <tr>
        <td>Z</td>
        <td><input type="number" id="netherZ" placeholder="例: -100"></td>
        <td><input type="number" id="overZ" placeholder="例: -800"></td>
      </tr>
    </tbody>
  </table>

  <div class="toggle-container">
    <label><input type="checkbox" id="decimalToggle"> 小数点を表示する</label>
  </div>

  <script>
    const netherX = document.getElementById("netherX");
    const netherY = document.getElementById("netherY");
    const netherZ = document.getElementById("netherZ");
    const overX = document.getElementById("overX");
    const overY = document.getElementById("overY");
    const overZ = document.getElementById("overZ");
    const decimalToggle = document.getElementById("decimalToggle");

    let isUpdating = false;

    function format(value) {
      if (decimalToggle.checked) {
        return value.toFixed(2);
      } else {
        return Math.round(value);
      }
    }

    function fromNether() {
      if (isUpdating) return;
      isUpdating = true;

      const x = parseFloat(netherX.value);
      const y = parseFloat(netherY.value);
      const z = parseFloat(netherZ.value);

      overX.value = isNaN(x) ? "" : format(x * 8);
      overY.value = isNaN(y) ? "" : format(y);
      overZ.value = isNaN(z) ? "" : format(z * 8);

      isUpdating = false;
    }

    function fromOverworld() {
      if (isUpdating) return;
      isUpdating = true;

      const x = parseFloat(overX.value);
      const y = parseFloat(overY.value);
      const z = parseFloat(overZ.value);

      netherX.value = isNaN(x) ? "" : format(x / 8);
      netherY.value = isNaN(y) ? "" : format(y);
      netherZ.value = isNaN(z) ? "" : format(z / 8);

      isUpdating = false;
    }

    netherX.addEventListener("input", fromNether);
    netherY.addEventListener("input", fromNether);
    netherZ.addEventListener("input", fromNether);
    overX.addEventListener("input", fromOverworld);
    overY.addEventListener("input", fromOverworld);
    overZ.addEventListener("input", fromOverworld);

    decimalToggle.addEventListener("change", () => {
      fromNether();
      fromOverworld();
    });
  </script>

</body>
</html>
